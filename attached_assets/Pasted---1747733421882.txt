âœ… ë¼í”Œì´ìš© ì‘ì—…ì§€ì‹œì„œ: íƒœëª½ë™í™” ìŠ¤íƒ€ì¼ ë°˜ì˜ ì˜¤ë¥˜ ìˆ˜ì •
ğŸ›  ì‘ì—… ëª©ì 
íƒœëª½ë™í™” ì´ë¯¸ì§€ ìƒì„± ì‹œ, ì‚¬ìš©ìê°€ ì„ íƒí•œ ìŠ¤íƒ€ì¼(ì˜ˆ: ì§€ë¸Œë¦¬í’, ë””ì¦ˆë‹ˆí’ ë“±)ì´ ì‹¤ì œ ì´ë¯¸ì§€ í”„ë¡¬í”„íŠ¸ì— ë°˜ì˜ë˜ì§€ ì•Šê³ , í•˜ë“œì½”ë”©ëœ "ì‚¬ì‹¤ì " ìŠ¤íƒ€ì¼ë¡œë§Œ ìƒì„±ë˜ëŠ” ì˜¤ë¥˜ë¥¼ í•´ê²°í•œë‹¤.

ğŸ“Œ ì£¼ìš” ì´ìŠˆ ìš”ì•½
í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì„ íƒëœ styleIdê°€ ì„œë²„ë¡œ ì •ìƒ ì „ì†¡ë˜ê³  ìˆìŒ

ì„œë²„ì—ì„œëŠ” ì´ IDë¥¼ ë°”íƒ•ìœ¼ë¡œ DBì—ì„œ ìŠ¤íƒ€ì¼ ì´ë¦„ì„ ì¡°íšŒí•˜ì§€ë§Œ, í”„ë¡¬í”„íŠ¸ êµ¬ì„± ì‹œ í•˜ë“œì½”ë”©ëœ â€œì‚¬ì‹¤ì â€ ìŠ¤íƒ€ì¼ì´ ê³„ì† ë“¤ì–´ê°

getStyleKeyword() í•¨ìˆ˜ê°€ styleNameì„ ì •í™•íˆ ì²˜ë¦¬í•˜ì§€ ì•Šê±°ë‚˜ fallback ê°’ìœ¼ë¡œ "realistic photograph"ë¥¼ ë°˜í™˜í•¨

âœ… ìˆ˜ì • ì‘ì—… ìƒì„¸
1. ì„œë²„ í•¨ìˆ˜ getStyleKeyword(styleName) ìˆ˜ì •
ts
ë³µì‚¬
í¸ì§‘
// server/services/openai-dream.ts ë“±ì§€ì—ì„œ í˜¸ì¶œë¨
function getStyleKeyword(styleName: string): string {
  const styleMap = {
    "ì§€ë¸Œë¦¬í’": "Studio Ghibli-inspired dreamy landscape, cinematic lighting, soft brush strokes",
    "ë””ì¦ˆë‹ˆí’": "Disney style character design, vibrant colors, magical fantasy setting",
    "ìˆ˜ë¬µí™”": "traditional Korean ink wash painting, monochrome, minimalist brush lines",
    "í”½ì‚¬í’": "Pixar style 3D animation, expressive characters, warm lighting",
    "ìˆ˜ì±„í™”": "soft watercolor painting, delicate brush texture, light pastel tones"
  };
  console.log("ğŸ¨ ì„ íƒëœ ìŠ¤íƒ€ì¼ ì´ë¦„:", styleName);
  console.log("ğŸ¨ ìµœì¢… ë³€í™˜ í‚¤ì›Œë“œ:", styleMap[styleName] ?? styleName);
  return styleMap[styleName] ?? styleName; // fallback ì œê±°í•˜ì§€ ë§ê³  ì›ë˜ ì´ë¦„ ì‚¬ìš©
}
2. ì´ë¯¸ì§€ ìƒì„± í”„ë¡¬í”„íŠ¸ êµ¬ì„± ë°©ì‹ ìˆ˜ì •
generateDreamImage() ë˜ëŠ” createImageFromPrompt() í•¨ìˆ˜ì—ì„œ ë‹¤ìŒ êµ¬ì¡°ë¡œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±:

ts
ë³µì‚¬
í¸ì§‘
const styleKeyword = getStyleKeyword(styleNameFromDB);
const systemPrompt = `ë‹¹ì‹ ì€ ìµœê³ ì˜ ë™í™” ì¼ëŸ¬ìŠ¤íŠ¸ ì‘ê°€ì…ë‹ˆë‹¤. "${styleKeyword}" ìŠ¤íƒ€ì¼ë¡œ ë™í™” ì‚½í™”ë¥¼ ê·¸ë ¤ì£¼ì„¸ìš”.`;
const finalPrompt = `${userPrompt}`; // ì¥ë©´ ì„¤ëª… ë˜ëŠ” ìë™ ìƒì„±ëœ í…ìŠ¤íŠ¸

const fullPrompt = `System: ${systemPrompt}\nUser: ${finalPrompt}`;

const response = await openai.createImage({
  model: "gpt-image-1",
  prompt: fullPrompt,
  response_format: "b64_json",
  size: "1024x1024"
});
3. ì „ì²´ ë¡œê¹… ì½”ë“œ ì‚½ì… (ë””ë²„ê¹…ìš©)
ts
ë³µì‚¬
í¸ì§‘
console.log("ğŸ§  ì „ë‹¬ëœ styleId:", styleId);
console.log("ğŸ§  DB ì¡°íšŒëœ ìŠ¤íƒ€ì¼ ì´ë¦„:", styleNameFromDB);
console.log("ğŸ§  í”„ë¡¬í”„íŠ¸ì— ë“¤ì–´ê°ˆ ìŠ¤íƒ€ì¼ í‚¤ì›Œë“œ:", styleKeyword);
console.log("ğŸ§  ìµœì¢… fullPrompt:", fullPrompt);
4. ì˜ˆì™¸ì²˜ë¦¬ ë° ê¸°ë³¸ê°’ ë™ì‘ ê²€ì¦
styleId ë˜ëŠ” styleNameì´ nullì¸ ê²½ìš° â†’ "ê¸°ë³¸ ìŠ¤íƒ€ì¼"ì´ë¼ëŠ” í‚¤ì›Œë“œë¡œ ì²˜ë¦¬í•˜ì§€ ë§ê³ , ëª…í™•í•œ ì—ëŸ¬ ë¡œê·¸ ì¶œë ¥

fallback ê°’ì„ "realistic photograph"ë¡œ ê°•ì œ ì ìš©í•˜ì§€ ë§ê³ , ì›ë³¸ ì´ë¦„ ê·¸ëŒ€ë¡œ ì‚¬ìš©

ğŸ”’ í•„ìˆ˜ ë³´ì•ˆ ë° ì—­í•  ì¡°ê±´ (ë¼í”Œ í•„ìˆ˜ì§€ì¹¨ í¬í•¨)
ì´ ì‘ì—…ì€ ë³‘ì›ê´€ë¦¬ì ë˜ëŠ” ì¼ë°˜ ì‚¬ìš©ììš© ê¸°ëŠ¥ì´ë¯€ë¡œ /campaigns/* ë˜ëŠ” /dream-book/* ê²½ë¡œì—ì„œ ì²˜ë¦¬

ë³‘ì›ê´€ë¦¬ì ê¶Œí•œ ê²½ë¡œ(/hospital/*) ë˜ëŠ” /admin/*ì—ì„œ ì´ ê¸°ëŠ¥ì— ì ‘ê·¼í•´ì„œëŠ” ì•ˆ ë¨

í˜„ì¬ ë¡œê·¸ì¸ ìœ ì €ê°€ ë³¸ì¸ ì†Œì†ì˜ ìŠ¤íƒ€ì¼ë§Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì œí•œë˜ì–´ì•¼ í•¨ (ì˜ˆ: ë³‘ì› ì „ìš© ìŠ¤íƒ€ì¼ì´ ì¶”ê°€ë˜ëŠ” ê²½ìš°ë¥¼ ëŒ€ë¹„)

ğŸ“ ì‘ì—… ëŒ€ìƒ íŒŒì¼ ëª©ë¡ (ì˜ˆìƒ)
íŒŒì¼ ê²½ë¡œ	ì—­í• 
server/services/openai-dream.ts	í”„ë¡¬í”„íŠ¸ ìƒì„±, ìŠ¤íƒ€ì¼ í‚¤ì›Œë“œ ì²˜ë¦¬
server/routes/dream-book.ts	ìƒì„± ìš”ì²­ ë¼ìš°íŒ…
shared/schema.ts	ìŠ¤íƒ€ì¼ ID â†’ ì´ë¦„ ë§¤í•‘ êµ¬ì¡°
client/src/pages/dream-book/create.tsx	í”„ë¡ íŠ¸ì—”ë“œ ìŠ¤íƒ€ì¼ ID ì „ì†¡ ë¡œì§