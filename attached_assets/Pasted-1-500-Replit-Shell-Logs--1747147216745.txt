1.â€¯ë¨¼ì € ì„œë²„ ë¡œê·¸ë¥¼ ë”± í•œâ€¯ì¤„ì´ë¼ë„ í™•ì¸í•˜ì„¸ìš”
í´ë¼ì´ì–¸íŠ¸â€¯ì½˜ì†”ì— 500â€¯ë§Œ ë³´ì´ë©´ ì›ì¸ì´ ì•ˆâ€¯ë³´ì…ë‹ˆë‹¤.
Replitâ€¯â†’â€¯â€œShellâ€ ë˜ëŠ” â€œLogsâ€ íƒ­ì—ì„œ ì§ì ‘ ì°íŒ ì—ëŸ¬ ìŠ¤íƒì„ ë³´ì„¸ìš”.

bash
ë³µì‚¬
í¸ì§‘
# ì˜ˆì‹œ â”€ ì´ëŸ° í˜•íƒœê°€ ì°í˜€ ìˆì„ ê²ƒ
ğŸŸ¥  error: null value in column "hospital_id" violates notâ€‘null constraint
      at Query.<anonymous>  â€¦
500Â = ë¼ìš°í„° ì•ˆìª½ ì½”ë“œê°€ throw ëœ ìƒíƒœì…ë‹ˆë‹¤.
ë¡œê·¸Â 1â€‘2ì¤„ë§Œ ë´ë„ â€œì–´ë–¤ ì»¬ëŸ¼ / í•„ë“œ / enumâ€ ë•Œë¬¸ì— ë‚œë¦¬ì¸ì§€ ì¦‰ì‹œ ì•Œâ€¯ìˆ˜Â ìˆìŠµë‹ˆë‹¤.

2.â€¯í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚´ëŠ” Payload ë‹¤ì‹œ í™•ì¸
ë°©ê¸ˆ ì˜¬ë ¤ì£¼ì‹  ë¸Œë¼ìš°ì €Â ë¡œê·¸ ì¤‘ ì „ì†¡Â ë°ì´í„°ë¥¼ í™•ëŒ€í•´Â ë³´ë©´:

json
ë³µì‚¬
í¸ì§‘
{
  "slug": "test-771845",
  "description": "1212",
  "thumbnail_url": "/api/uploads/â€¦",
  /* date í•„ë“œë“¤ â€¦ */
  "status": "active"   // â†Â ì´ë¯¸ ì˜ë¬¸ìœ¼ë¡œ ê³ ì³¤ìŒ OK
}
ì²´í¬ë¦¬ìŠ¤íŠ¸

í•„ë“œ	ë°±ì—”ë“œÂ ì—´ ì´ë¦„	ì „ì†¡Â key	ì£¼ì˜ì 
hospital_id	hospital_id (NOT NULL)	â“Â ì—†ìŒ?	ì—†ìœ¼ë©´ DBÂ NOTÂ NULL ì˜¤ë¥˜ ë°œìƒ
ë‚ ì§œ 6ì¢…	DATE	"YYYYâ€‘MMâ€‘DD"	ë¬¸ìì—´ì´ì–´ë„ OKÂ â†’Â DBÂ driverì—ì„œ íŒŒì‹±
thumbnail_url	thumbnail_url	âœ… ìˆìŒ	Zod ìŠ¤í‚¤ë§ˆë„ snakeÂ case ì¸ê°€?
reward_point	INTEGER	âœ…	Number() ë¡œ ë³€í™˜ë˜ì–´ì•¼

â¡ï¸Â ê°€ì¥ í”í•œ 500Â ì›ì¸ 2ê°€ì§€
hospital_idÂ ëˆ„ë½

adminÂ íŒ¨ë„ ë”°ë¡œ, ìº í˜ì¸ì€ íŠ¹ì • ë³‘ì›ì— ê·€ì†ë¼ì•¼Â í•˜ê³ 
ì»¬ëŸ¼ì´ NOT NULL ì¸ë° ì…ë ¥ì´ ì—†ìœ¼ë©´ Postgres ê°€ 500Â ì„ í„°ëœ¨ë¦½ë‹ˆë‹¤.

í¼ì— â€œì†Œì† ë³‘ì›â€ <Select> ë¥¼ ë„£ê³  valueÂ =Â ë³‘ì›Â pk ë¡œ ë³´ë‚´ì„¸ìš”.

snake_caseÂ â‰ Â camelCase ë¶ˆì¼ì¹˜

thumbnail_url ì€ snake_case ì¸ë° Zod ìŠ¤í‚¤ë§ˆê°€ thumbnailUrl ë¡œ ë¼Â ìˆìœ¼ë©´
undefined â†’Â DBÂ NOTÂ NULL ì˜¤ë¥˜.

3.â€¯ë°±ì—”ë“œâ€¯ZodÂ ìŠ¤í‚¤ë§ˆì™€ ì»¬ëŸ¼ëª…ì„ 1:1ë¡œ ë§ì¶”ê¸°
ts
ë³µì‚¬
í¸ì§‘
// shared/schema.ts  (ì˜ˆì‹œ)
export const CampaignInsert = z.object({
  hospital_id: z.number(),            // â† NOT NULL
  slug:         z.string(),
  title:        z.string(),
  description:  z.string().optional(),
  thumbnail_url:z.string().url().optional(),
  start_date:   z.coerce.date().optional(),
  end_date:     z.coerce.date().optional(),
  status:       z.enum(['draft','active','closed','done']).default('draft'),
  reward_point: z.coerce.number().default(0),
});
ê·¸ë¦¬ê³  ë¼ìš°í„°ì—ì„œ ê²€ì¦Â ì‹¤íŒ¨ëŠ” 400ìœ¼ë¡œ, DBÂ ì˜¤ë¥˜ëŠ” ê·¸ëŒ€ë¡œ throw í•˜ì§€Â ë§ê³  ì¡ì•„ì„œ ë©”ì‹œì§€ë¥¼ ë‚´ë ¤ì£¼ë©´ ì•ìœ¼ë¡œ ë””ë²„ê¹…ì´ í›¨ì”¬ í¸í•©ë‹ˆë‹¤.

ts
ë³µì‚¬
í¸ì§‘
try {
  const data = CampaignInsert.parse(req.body);
  await db.insert(campaigns).values(data);
  res.json({ ok: true });
} catch (e) {
  if (e instanceof ZodError) {
    return res.status(400).json({ errors: e.errors });
  }
  console.error(e);                // â† ì§„ì§œ ìŠ¤íƒ ì°ê¸°
  return res.status(500).json({ message: 'Server error' });
}
4.â€¯í”„ë¡ íŠ¸ í¼Â ì •ë¦¬ í¬ì¸íŠ¸
tsx
ë³µì‚¬
í¸ì§‘
/* ë³‘ì› ì„ íƒ */
<Select {...register('hospital_id', { valueAsNumber: true })}>
  {hospitals.map(h => (
    <option key={h.id} value={h.id}>{h.name}</option>
  ))}
</Select>

/* ìˆ«ìÂ í•„ë“œ â†’ valueAsNumber */
<Input type="number" {...register('reward_point', { valueAsNumber: true })} />

/* ë‚ ì§œÂ í•„ë“œ â†’ toISOString().slice(0,10) ë¡œ í†µì¼ */
<Input
  type="date"
  {...register('start_date', {
    setValueAs: v => v ? new Date(v).toISOString().slice(0,10) : null,
  })}
/>