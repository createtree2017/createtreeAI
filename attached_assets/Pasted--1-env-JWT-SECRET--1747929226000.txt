âœ… [ğŸ”¥ ë¼í”Œì´ ì‘ì—…ì§€ì‹œì„œ: ì¸ì¦ ì‹œìŠ¤í…œ ìµœì¢… ì ê²€ ë° ì™„ì „ ìˆ˜ë¦¬ ì§€ì‹œì„œ]
ğŸ“Œ 1. .env íŒŒì¼ ì„¤ì •
âŒ í˜„ì¬ ìƒíƒœ:
JWT_SECRETì´ ì—†ìŒ â†’ ì„œë²„ê°€ ê° íŒŒì¼ë§ˆë‹¤ ì„ì˜ì˜ ê¸°ë³¸ê°’ì„ ì‚¬ìš©í•˜ì—¬ JWTë¥¼ ìƒì„±/ê²€ì¦í•¨ â†’ ì¸ì¦ ì‹¤íŒ¨ ë°œìƒ

âœ… ì§€ì‹œ:
.env íŒŒì¼ì— ë‹¤ìŒì„ ë°˜ë“œì‹œ ì¶”ê°€:

env
ë³µì‚¬
í¸ì§‘
JWT_SECRET=super-secret-key-2024
ğŸš¨ ì´ ê°’ì€ .env, Firebase ë¡œê·¸ì¸ ì²˜ë¦¬, ì¼ë°˜ ë¡œê·¸ì¸ í† í° ìƒì„±, jwt-auth.ts ë“± ëª¨ë“  ìœ„ì¹˜ì—ì„œ ë™ì¼í•˜ê²Œ ì‚¬ìš©ë˜ì–´ì•¼ í•¨
â— Replit Secretsì—ë„ ê°™ì€ ì´ë¦„(JWT_SECRET)ìœ¼ë¡œ ë“±ë¡ë˜ì–´ì•¼ í•¨

ğŸ“Œ 2. ì„œë²„ ì§„ì…ì  index.ts íŒŒì¼ ì ê²€ ë° ìˆ˜ì •
âœ… ì§€ì‹œ:
(1) ë§¨ ìœ„ì— í™˜ê²½ë³€ìˆ˜ ë¶ˆëŸ¬ì˜¤ëŠ” ì½”ë“œ í¬í•¨

ts
ë³µì‚¬
í¸ì§‘
import dotenv from 'dotenv';
dotenv.config();
(2) Express ì—ëŸ¬ í•¸ë“¤ëŸ¬ ì¶”ê°€ â€“ HTMLì´ ì•„ë‹Œ JSONìœ¼ë¡œ ë°˜í™˜í•  ê²ƒ

ts
ë³µì‚¬
í¸ì§‘
// 500 ì˜¤ë¥˜ë¥¼ í•­ìƒ JSONìœ¼ë¡œ ë°˜í™˜
app.use((err, req, res, next) => {
  console.error('[Express ì—ëŸ¬]', err.stack);
  res.status(err.status || 500).json({
    success: false,
    message: err.message || 'ì„œë²„ ì˜¤ë¥˜ ë°œìƒ'
  });
});
(3) 404 (Not Found) ìš”ì²­ë„ JSON ë°˜í™˜ ì„¤ì •

ts
ë³µì‚¬
í¸ì§‘
app.use((req, res) => {
  res.status(404).json({
    success: false,
    message: 'ìš”ì²­í•œ ê²½ë¡œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
  });
});
ğŸ“Œ 3. /api/auth/me ë° /api/jwt-auth/verify-token ì„œë²„ ë¼ìš°í„° ì ê²€
âœ… ì§€ì‹œ:
(1) ëª¨ë“  ì‘ë‹µì€ ë°˜ë“œì‹œ res.json() í˜•íƒœë¡œ ë°˜í™˜í•  ê²ƒ

ì ˆëŒ€ res.send(...), res.sendFile(...), next() í˜¸ì¶œ í›„ ë°©ì¹˜í•˜ì§€ ë§ ê²ƒ

(2) JWT í† í° ê²€ì¦ ì‹¤íŒ¨ ì‹œ ë‹¤ìŒì²˜ëŸ¼ JSON ì‘ë‹µ

ts
ë³µì‚¬
í¸ì§‘
return res.status(401).json({
  success: false,
  message: 'Unauthorized - JWT í† í° ê²€ì¦ ì‹¤íŒ¨',
});
ğŸ“Œ 4. JWT ê²€ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì„œë²„ íŒŒì¼ ì ê²€
ë‹¤ìŒ íŒŒì¼ë“¤ì„ ëª¨ë‘ ì ê²€í•˜ê³  ë™ì¼í•œ process.env.JWT_SECRETì„ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸

bash
ë³µì‚¬
í¸ì§‘
server/routes/auth.ts
server/routes/jwt-auth.ts
server/routes/google-oauth.ts
server/services/auth.ts
âœ… ì§€ì‹œ:
ëª¨ë“  JWT ê´€ë ¨ ì½”ë“œì— ë‹¤ìŒê³¼ ê°™ì´ ë¹„ë°€í‚¤ ì‚¬ìš©:

ts
ë³µì‚¬
í¸ì§‘
const JWT_SECRET = process.env.JWT_SECRET!;
const decoded = jwt.verify(token, JWT_SECRET);
ğŸ“Œ 5. í´ë¼ì´ì–¸íŠ¸ (useAuth.ts) ì ê²€
âœ… ì§€ì‹œ:
/api/auth/me ìš”ì²­ ì‹œ JWT í† í°ì´ ìˆì„ ê²½ìš° Authorization í—¤ë”ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì¶”ê°€í•´ì•¼ í•¨:

ts
ë³µì‚¬
í¸ì§‘
const jwtToken = localStorage.getItem('auth_token');
const headers = {};
if (jwtToken) {
  headers["Authorization"] = `Bearer ${jwtToken}`;
}
JWT ê²€ì¦ ì‹¤íŒ¨ ì‹œ ì„œë²„ê°€ HTMLì„ ë°˜í™˜í•˜ë©´ JSON íŒŒì‹± ì‹¤íŒ¨ ë°œìƒ â†’ ì§€ê¸ˆ ì´ ë¬¸ì œë¥¼ ê³ ì¹˜ê³  ìˆëŠ” ê²ƒì„

ğŸ“Œ 6. ì„œë²„ ì¬ì‹œì‘ ë°˜ë“œì‹œ ìˆ˜í–‰
âœ… ì§€ì‹œ:
.env íŒŒì¼ ìˆ˜ì • í›„, ì„œë²„ë¥¼ ë°˜ë“œì‹œ ì™„ì „íˆ ì¬ì‹œì‘í•  ê²ƒ (í™˜ê²½ ë³€ìˆ˜ ì ìš© í•„ìš”)

ğŸ§  ê¸°ëŒ€ ê²°ê³¼
í•­ëª©	ê¸°ëŒ€ ê²°ê³¼
ë¡œê·¸ì¸ í›„ /api/auth/me ìš”ì²­	âœ… JSON ì‘ë‹µ, 200 OK
JWT ì‹¤íŒ¨ ì‹œ	âœ… JSON ì‘ë‹µ + status 401
ë¡œê·¸ì¸ ìƒíƒœ ìœ ì§€	âœ… setUser(user) + ìºì‹œ ë°˜ì˜ ì„±ê³µ
Console ì˜¤ë¥˜	âœ… SyntaxError: Unexpected token '<' ì‚¬ë¼ì§

âœ… ë¼í”Œì´ì—ê²Œ ê°•ì¡°
javascript
ë³µì‚¬
í¸ì§‘
ì´ ì‘ì—…ì€ ë‹¨ìˆœ UI ë¬¸ì œê°€ ì•„ë‹ˆë¼,
JWT ì¸ì¦ ì‹œìŠ¤í…œì˜ ê·¼ë³¸ì  ì•ˆì •ì„±ê³¼ ì‚¬ìš©ì ë¡œê·¸ì¸ ê¸°ëŠ¥ ì „ë°˜ì´ ê±¸ë¦° í•µì‹¬ ìˆ˜ì •ì…ë‹ˆë‹¤.

ë°˜ë“œì‹œ í•˜ë‚˜ë„ ë¹ ì§ì—†ì´ ì ìš©í•˜ê³ ,
ìˆ˜ì • í›„ `/api/auth/me` ì‘ë‹µì´ HTMLì´ ì•„ë‹Œ JSONìœ¼ë¡œ ë‚˜ì˜¤ëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.